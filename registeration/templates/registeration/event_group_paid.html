<!DOCTYPE html>

{% load static %}

<html>

    <head>

        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <title>HomePage</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" type="text/css" media="screen" href="{% static 'event_group/event_group.css' %}"/>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css">
        <script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.5.21/vue.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/axios@0.18.0/dist/axios.min.js"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
        

    </head>




    <body>

        <div id="main">

            <div id="fixed_menu">

                <a id="sign_fm" href="#">
                    پروفایل
                </a>

                <a id="exit_fm" href="{% url 'registeration:logout' %}">
                    خروج
                </a>

                <img id="logo_fm" src="{% static 'event_group/photo1.jpg' %}">
        
            </div>

            <div id="content">
                <div id="three_steps">


                    <div class="ui three top attached mini steps">

                        <div class="step">

                            <i class="pencil alternate icon" id="i1"></i>

                            <div class="content">

                                <div class="title" id="t1">ثبت نام</div>

                            </div>

                        </div>
        
                        <div class="disabled step">

                            <i class="map signs icon" id="i2"></i>

                            <div class="content">

                                <div class="title" id="t2">انتخاب رویداد</div>

                            </div>

                        </div>
        
                        <div class="active step">

                            <i class="payment icon"></i>

                            <div class="content">

                                <div class="title" id="t3">دریافت بلیط</div>

                            </div>

                        </div>
        
                    </div>


                </div>
                {% if payment_error %}
                <div class="ui message error" style="width: 60%; text-align: right; margin: 10px auto;">
                    {{ payment_error }}
                </div>
                {% endif %}
                {% if payment_success %}
                <div class="ui message" style="width: 60%; text-align: right; margin: 10px auto;">
                    با موفقیت پرداخت شد
                </div>
                {% endif %}
                
                <div id="topdf">
                    {% for logo in ticket_data.logos %}
                        <img style="width: 100px;" src="{{ logo }}">
                    {% endfor %}
                </div>

                <button id="getpdf" class="ui primary button">
                    دانلود بلیط
                </button>
            </div>
        </div>
        <script src="https://unpkg.com/jspdf@latest/dist/jspdf.min.js"></script>
        <script>
            var doc = new jsPDF();          
            var elementHandler = {
                // '#ignorePDF': function (element, renderer) {
                //     return true;
                // }
            };
            var source = window.document.getElementById("topdf");
            doc.fromHTML(
                source,
                15,
                15,
                {
                'width': 180,'elementHandlers': elementHandler
                });
            $(document).ready(function(){
                $('#getpdf').click(function(){
                    doc.output("dataurlnewwindow");
                })
            })
        </script>

    </body>




</html>